"""
æ•°æ®é›†æ¨èå’Œæ¯”è¾ƒè„šæœ¬
å¸®åŠ©é€‰æ‹©æœ€é€‚åˆçš„æ•°æ®é›†
"""

import pandas as pd
from tabulate import tabulate


def show_dataset_comparison():
    """æ˜¾ç¤ºæ•°æ®é›†æ¯”è¾ƒè¡¨"""
    
    datasets = [
        {
            "æ•°æ®é›†": "HotpotQA",
            "ä»»åŠ¡ç±»å‹": "å¤šæ–‡æ¡£é—®ç­”",
            "æ ·æœ¬æ•°é‡": "90K",
            "éš¾åº¦": "â­â­â­â­",
            "åŒ¹é…åº¦": "â­â­â­â­â­",
            "ç‰¹ç‚¹": "å¤šè·³æ¨ç†,æ”¯æ’‘äº‹å®",
            "ä¸‹è½½å¤§å°": "~200MB",
            "æ¨èæŒ‡æ•°": "â­â­â­â­â­"
        },
        {
            "æ•°æ®é›†": "DocRED",
            "ä»»åŠ¡ç±»å‹": "æ–‡æ¡£çº§å…³ç³»æŠ½å–",
            "æ ·æœ¬æ•°é‡": "5K",
            "éš¾åº¦": "â­â­â­â­â­",
            "åŒ¹é…åº¦": "â­â­â­â­â­",
            "ç‰¹ç‚¹": "ä¸°å¯Œå®ä½“å…³ç³»,è·¨å¥æ¨ç†",
            "ä¸‹è½½å¤§å°": "~50MB",
            "æ¨èæŒ‡æ•°": "â­â­â­â­â­"
        },
        {
            "æ•°æ®é›†": "2WikiMultiHopQA",
            "ä»»åŠ¡ç±»å‹": "å¤šè·³é—®ç­”",
            "æ ·æœ¬æ•°é‡": "167K",
            "éš¾åº¦": "â­â­â­â­",
            "åŒ¹é…åº¦": "â­â­â­â­",
            "ç‰¹ç‚¹": "æ¨ç†è·¯å¾„,Wikipedia",
            "ä¸‹è½½å¤§å°": "~300MB",
            "æ¨èæŒ‡æ•°": "â­â­â­â­"
        },
        {
            "æ•°æ®é›†": "FEVER",
            "ä»»åŠ¡ç±»å‹": "äº‹å®éªŒè¯",
            "æ ·æœ¬æ•°é‡": "185K",
            "éš¾åº¦": "â­â­â­",
            "åŒ¹é…åº¦": "â­â­â­",
            "ç‰¹ç‚¹": "è¯æ®æ£€ç´¢,äº‹å®éªŒè¯",
            "ä¸‹è½½å¤§å°": "~400MB",
            "æ¨èæŒ‡æ•°": "â­â­â­"
        },
        {
            "æ•°æ®é›†": "MultiRC",
            "ä»»åŠ¡ç±»å‹": "å¤šå¥é˜…è¯»ç†è§£",
            "æ ·æœ¬æ•°é‡": "6K",
            "éš¾åº¦": "â­â­â­",
            "åŒ¹é…åº¦": "â­â­â­",
            "ç‰¹ç‚¹": "å¤šå¥æ¨ç†,é€‰æ‹©é¢˜",
            "ä¸‹è½½å¤§å°": "~20MB",
            "æ¨èæŒ‡æ•°": "â­â­â­"
        }
    ]
    
    df = pd.DataFrame(datasets)
    print("ğŸ“Š æ•°æ®é›†æ¯”è¾ƒè¡¨")
    print("=" * 80)
    print(tabulate(df, headers='keys', tablefmt='grid', showindex=False))


def show_detailed_recommendations():
    """æ˜¾ç¤ºè¯¦ç»†æ¨è"""
    
    print("\nğŸ¯ è¯¦ç»†æ¨èåˆ†æ")
    print("=" * 50)
    
    recommendations = [
        {
            "rank": 1,
            "dataset": "HotpotQA",
            "reason": "æœ€é€‚åˆGDM-Netçš„å¤šæ–‡æ¡£æ¨ç†æ¶æ„",
            "pros": [
                "éœ€è¦è·¨å¤šä¸ªæ–‡æ¡£è¿›è¡Œæ¨ç†",
                "æœ‰æ˜ç¡®çš„æ”¯æ’‘äº‹å®æ ‡æ³¨",
                "é—®é¢˜å¤æ‚åº¦é€‚ä¸­",
                "æ•°æ®é‡å……è¶³"
            ],
            "cons": [
                "éœ€è¦è¾ƒå¤šè®¡ç®—èµ„æº",
                "æ•°æ®é¢„å¤„ç†ç›¸å¯¹å¤æ‚"
            ],
            "best_for": "éªŒè¯GDM-Netçš„æ ¸å¿ƒèƒ½åŠ›"
        },
        {
            "rank": 2,
            "dataset": "DocRED",
            "reason": "ä¸“é—¨ä¸ºæ–‡æ¡£çº§å…³ç³»æŠ½å–è®¾è®¡",
            "pros": [
                "ä¸°å¯Œçš„å®ä½“å’Œå…³ç³»æ ‡æ³¨",
                "éœ€è¦è·¨å¥å­æ¨ç†",
                "æ•°æ®è´¨é‡å¾ˆé«˜",
                "é€‚åˆå›¾ç¥ç»ç½‘ç»œ"
            ],
            "cons": [
                "æ•°æ®é‡ç›¸å¯¹è¾ƒå°",
                "ä»»åŠ¡ç›¸å¯¹ä¸“ä¸€"
            ],
            "best_for": "æµ‹è¯•å›¾è®°å¿†å’Œå…³ç³»æ¨ç†èƒ½åŠ›"
        },
        {
            "rank": 3,
            "dataset": "2WikiMultiHopQA",
            "reason": "ä¸“é—¨è®¾è®¡çš„å¤šè·³æ¨ç†æ•°æ®é›†",
            "pros": [
                "æœ‰æ¨ç†è·¯å¾„æ ‡æ³¨",
                "åŸºäºWikipediaçœŸå®æ•°æ®",
                "æ•°æ®é‡å¤§"
            ],
            "cons": [
                "å¯èƒ½è¿‡äºå¤æ‚",
                "éœ€è¦å¤§é‡è®¡ç®—èµ„æº"
            ],
            "best_for": "æŒ‘æˆ˜æ¨¡å‹çš„æ¨ç†æ·±åº¦"
        }
    ]
    
    for rec in recommendations:
        print(f"\nğŸ† ç¬¬{rec['rank']}æ¨è: {rec['dataset']}")
        print(f"ğŸ“ æ¨èç†ç”±: {rec['reason']}")
        print("âœ… ä¼˜ç‚¹:")
        for pro in rec['pros']:
            print(f"   â€¢ {pro}")
        print("âš ï¸  ç¼ºç‚¹:")
        for con in rec['cons']:
            print(f"   â€¢ {con}")
        print(f"ğŸ¯ æœ€é€‚åˆ: {rec['best_for']}")


def show_quick_start_guide():
    """æ˜¾ç¤ºå¿«é€Ÿå¼€å§‹æŒ‡å—"""
    
    print("\nğŸš€ å¿«é€Ÿå¼€å§‹æŒ‡å—")
    print("=" * 50)
    
    guides = {
        "åˆå­¦è€…": {
            "æ¨è": "HotpotQA (å°è§„æ¨¡)",
            "å‘½ä»¤": [
                "python download_datasets.py",
                "é€‰æ‹© 1 (HotpotQA)",
                "python train/train.py --config config/optimized_config.yaml --mode train"
            ],
            "é¢„æœŸæ—¶é—´": "2-3å°æ—¶è®­ç»ƒ",
            "å†…å­˜éœ€æ±‚": "4-6GB"
        },
        "ç ”ç©¶è€…": {
            "æ¨è": "DocRED + HotpotQA",
            "å‘½ä»¤": [
                "python download_datasets.py",
                "é€‰æ‹© 5 (å…¨éƒ¨ä¸‹è½½)",
                "åˆ†åˆ«è®­ç»ƒä¸åŒæ•°æ®é›†"
            ],
            "é¢„æœŸæ—¶é—´": "6-8å°æ—¶è®­ç»ƒ",
            "å†…å­˜éœ€æ±‚": "6-8GB"
        },
        "å·¥ç¨‹å¸ˆ": {
            "æ¨è": "æ ¹æ®å…·ä½“ä»»åŠ¡é€‰æ‹©",
            "å‘½ä»¤": [
                "å…ˆç”¨å°æ•°æ®é›†éªŒè¯",
                "å†ç”¨å¤§æ•°æ®é›†è®­ç»ƒ",
                "ä½¿ç”¨GPUåŠ é€Ÿ"
            ],
            "é¢„æœŸæ—¶é—´": "1-2å¤©å®Œæ•´å®éªŒ",
            "å†…å­˜éœ€æ±‚": "8GB+"
        }
    }
    
    for user_type, guide in guides.items():
        print(f"\nğŸ‘¤ {user_type}:")
        print(f"   ğŸ“‹ æ¨è: {guide['æ¨è']}")
        print(f"   â±ï¸  é¢„æœŸæ—¶é—´: {guide['é¢„æœŸæ—¶é—´']}")
        print(f"   ğŸ’¾ å†…å­˜éœ€æ±‚: {guide['å†…å­˜éœ€æ±‚']}")
        print("   ğŸ”§ æ“ä½œæ­¥éª¤:")
        for i, cmd in enumerate(guide['å‘½ä»¤'], 1):
            print(f"      {i}. {cmd}")


def show_performance_expectations():
    """æ˜¾ç¤ºæ€§èƒ½é¢„æœŸ"""
    
    print("\nğŸ“ˆ æ€§èƒ½é¢„æœŸ")
    print("=" * 50)
    
    expectations = [
        {
            "æ•°æ®é›†": "HotpotQA",
            "æŒ‡æ ‡": "EM/F1",
            "åŸºçº¿": "45-55%",
            "GDM-Neté¢„æœŸ": "55-65%",
            "è®­ç»ƒæ—¶é—´": "2-4å°æ—¶(CPU)"
        },
        {
            "æ•°æ®é›†": "DocRED",
            "æŒ‡æ ‡": "F1",
            "åŸºçº¿": "50-60%",
            "GDM-Neté¢„æœŸ": "60-70%",
            "è®­ç»ƒæ—¶é—´": "1-2å°æ—¶(CPU)"
        },
        {
            "æ•°æ®é›†": "FEVER",
            "æŒ‡æ ‡": "å‡†ç¡®ç‡",
            "åŸºçº¿": "85-90%",
            "GDM-Neté¢„æœŸ": "88-93%",
            "è®­ç»ƒæ—¶é—´": "3-5å°æ—¶(CPU)"
        }
    ]
    
    df = pd.DataFrame(expectations)
    print(tabulate(df, headers='keys', tablefmt='grid', showindex=False))


def main():
    """ä¸»å‡½æ•°"""
    print("ğŸ¯ GDM-Net æ•°æ®é›†æ¨èç³»ç»Ÿ")
    print("=" * 60)
    
    # æ˜¾ç¤ºæ¯”è¾ƒè¡¨
    show_dataset_comparison()
    
    # æ˜¾ç¤ºè¯¦ç»†æ¨è
    show_detailed_recommendations()
    
    # æ˜¾ç¤ºå¿«é€Ÿå¼€å§‹æŒ‡å—
    show_quick_start_guide()
    
    # æ˜¾ç¤ºæ€§èƒ½é¢„æœŸ
    show_performance_expectations()
    
    print("\nğŸ’¡ æœ€ç»ˆå»ºè®®:")
    print("1. ğŸ¥‡ é¦–é€‰: HotpotQA - æœ€åŒ¹é…GDM-Netè®¾è®¡ç†å¿µ")
    print("2. ğŸ¥ˆ æ¬¡é€‰: DocRED - ä¸“ä¸šçš„å…³ç³»æŠ½å–æ•°æ®é›†")
    print("3. ğŸ¥‰ å¤‡é€‰: 2WikiMultiHopQA - æŒ‘æˆ˜æ¨ç†èƒ½åŠ›")
    
    print("\nğŸš€ ç«‹å³å¼€å§‹:")
    print("python download_datasets.py")


if __name__ == "__main__":
    try:
        main()
    except ImportError:
        print("âŒ ç¼ºå°‘ä¾èµ–åŒ…ï¼Œæ­£åœ¨å®‰è£…...")
        import subprocess
        subprocess.run(["pip", "install", "tabulate", "pandas"])
        main()
